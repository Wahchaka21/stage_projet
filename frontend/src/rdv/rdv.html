<div class="min-h-svh bg-gradient-to-b from-[#315f92] to-[#24476e]">
    <header class="sticky top-0 z-10 px-4 pt-4 pb-3 bg-gradient-to-b from-[#315f92] to-transparent">
        <div class="flex items-center justify-between text-white">
            <a routerLink="/accueil" class="rounded-full p-2 hover:bg-white/10 active:scale-95">
                <svg viewBox="0 0 24 24" class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M15 19l-7-7 7-7" />
                </svg>
            </a>
            <div class="text-right">
                <p class="text-[11px] uppercase tracking-wide opacity-80">Mes rendez-vous</p>
                <h1 class="text-base font-bold leading-tight">RDV</h1>
            </div>
        </div>
    </header>

    <main class="-mt-2 rounded-t-3xl bg-white p-4 sm:p-6">
        <div *ngIf="loading" class="rounded-xl border border-[#e1e9f5] bg-[#f5f7fb] p-4 text-[#315f92]">
            Chargement…
        </div>
        <div *ngIf="!loading && error" class="rounded-xl border border-red-200 bg-red-50 p-4 text-red-700">
            {{ error }}
        </div>

        <div *ngIf="!loading && !error && upcoming.length === 0 && past.length === 0"
            class="grid place-items-center h-48 text-center text-[#527bab]">
            <div>
                <p class="text-sm">Aucun rendez-vous pour le moment.</p>
                <p class="text-xs opacity-80">Ton coach t’en enverra un quand ce sera prêt.</p>
            </div>
        </div>

        <section *ngIf="!loading && !error && upcoming.length > 0" class="space-y-3">
            <h2 class="text-sm font-semibold text-[#315f92]">À venir</h2>
            <article *ngFor="let r of upcoming" class="rounded-2xl border border-[#e1e9f5] bg-white shadow-sm p-4">
                <div class="flex items-start gap-3">
                    <div class="rounded-xl bg-[#e9eef7] px-3 py-2 text-[#315f92] text-sm font-semibold">
                        {{ isToday(r.date) ? 'Aujourd’hui' : formatShort(r.date) }}
                    </div>
                    <div class="flex-1">
                        <p class="text-sm font-semibold text-[#315f92]">{{ formatFull(r.date) }}</p>
                        <p class="text-sm text-[#527bab]" *ngIf="r.description">{{ r.description }}</p>
                        <p class="text-[11px] mt-1 text-[#527bab]/70">Avec le coach</p>
                    </div>
                </div>
            </article>
        </section>

        <section *ngIf="!loading && !error && past.length > 0" class="space-y-3 mt-6">
            <h2 class="text-sm font-semibold text-[#315f92]">Passés</h2>
            <article *ngFor="let r of past" class="rounded-2xl border border-[#e1e9f5] bg-white p-4">
                <p class="text-sm font-medium text-[#315f92]">{{ formatFull(r.date) }}</p>
                <p class="text-sm text-[#527bab]" *ngIf="r.description">{{ r.description }}</p>
            </article>
        </section>

        <div class="h-16"></div>
    </main>

    <nav class="fixed inset-x-0 bottom-0 z-20 mx-auto max-w-md px-4 pb-4">
        <div class="mx-auto rounded-2xl bg-white/95 backdrop-blur shadow-lg border border-gray-100">
            <div class="grid grid-cols-3">
                <a routerLink="/accueil" class="flex flex-col items-center py-2.5 text-[#315f92]">
                    <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 12l9-9 9 9" />
                        <path d="M9 21V9h6v12" />
                    </svg>
                    <span class="text-[11px] font-medium">Accueil</span>
                </a>
                <a [routerLink]="'/chat/'+ 'coach'"
                    class="flex flex-col items-center py-2.5 text-gray-500 hover:text-[#315f92]">
                    <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15a4 4 0 0 1-4 4H7l-4 3V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z" />
                    </svg>
                    <span class="text-[11px] font-medium">Messages</span>
                </a>
                <a routerLink="/rdv" class="flex flex-col items-center py-2.5 text-[#315f92]">
                    <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="4" width="18" height="18" rx="2" />
                        <path d="M16 2v4M8 2v4M3 10h18" />
                    </svg>
                    <span class="text-[11px] font-medium">RDV</span>
                </a>
            </div>
        </div>
    </nav>
</div>